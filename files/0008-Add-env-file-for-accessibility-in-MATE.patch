From d1b8af4529a3cb796f9af6c0a3e442234c7f7fd6 Mon Sep 17 00:00:00 2001
From: Ikey Doherty <ikey@solus-project.com>
Date: Sun, 16 Oct 2016 09:32:38 +0100
Subject: [PATCH 08/10] Add env file for accessibility in MATE

Signed-off-by: Ikey Doherty <ikey@solus-project.com>
---
 Makefile.am                  |  1 +
 configure.ac                 |  1 +
 env/60-mate-accessibility.sh |  7 +++++++
 env/Makefile.am              | 11 +++++++++++
 4 files changed, 20 insertions(+)
 create mode 100644 env/60-mate-accessibility.sh
 create mode 100644 env/Makefile.am

diff --git a/Makefile.am b/Makefile.am
index 470e1bb..4794600 100644
--- a/Makefile.am
+++ b/Makefile.am
@@ -1,4 +1,5 @@
 SUBDIRS = \
+    env \
 	lightdm \
 	panel \
 	schemas
diff --git a/configure.ac b/configure.ac
index 0a779be..825dfee 100644
--- a/configure.ac
+++ b/configure.ac
@@ -3,6 +3,7 @@ AM_INIT_AUTOMAKE([-Wno-portability no-dist-gzip dist-xz foreign subdir-objects])
 AC_PREFIX_DEFAULT(/usr/local)
 
 AC_CONFIG_FILES([Makefile
+                env/Makefile
                 lightdm/Makefile
                 panel/Makefile
                 schemas/Makefile
diff --git a/env/60-mate-accessibility.sh b/env/60-mate-accessibility.sh
new file mode 100644
index 0000000..6d2df97
--- /dev/null
+++ b/env/60-mate-accessibility.sh
@@ -0,0 +1,7 @@
+# Begin /usr/share/defaults/etc/profile.d/60-mate-accessibility.sh
+
+if [ -z "${GTK_MODULES}" ]; then
+    export GTK_MODULES="gail:atk-bridge"
+fi
+
+# End /usr/share/defaults/etc/profile.d/60-mate-accessibility.sh
diff --git a/env/Makefile.am b/env/Makefile.am
new file mode 100644
index 0000000..4324c07
--- /dev/null
+++ b/env/Makefile.am
@@ -0,0 +1,11 @@
+ENV_FILES = \
+	60-mate-accessibility.sh
+
+EXTRA_DIST = \
+	$(ENV_FILES)
+
+envdir = \
+	$(datadir)/defaults/etc/profile.d
+
+env_DATA = \
+	$(ENV_FILES)
-- 
2.10.1

